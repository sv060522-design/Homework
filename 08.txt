Причина ошибки: после ввода числа и нажатия Enter в буфере ввода остается символ новой строки '\n',
поэтому при следующем вызове scanf("%[^\n]", str) функция сразу завершает чтение,
т.к. %[^\n] читает все символы до новой строки, а первый символ в буфере '\n', типо новая строка.
Можно так исправить:
1. Добавить пробел перед %[^\n]: scanf(" %[^\n]", str);
2. Использовать fgets() вместо scanf;
3. Наверное ещё как-то тоже можно.